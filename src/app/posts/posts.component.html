<div class="posts-container">
  <form class="post-form" [formGroup]="postForm" (ngSubmit)="post()">
    <mat-form-field class="full-width" appearance="fill">
      <mat-label>Say Something...</mat-label>
      <textarea matInput formControlName="postText"></textarea>
    </mat-form-field>
    <div class="d-flex justify-content-around">
      <button mat-raised-button color="primary">Post</button>
      <input
        class="form-control"
        type="file"
        (change)="onFileSelected($event)"
        style="width: 80%"
      />
    </div>
  </form>

  <mat-card class="card" *ngFor="let post of posts.reverse()">
    <mat-card-header>
      <mat-card-title>
        {{ post.username }}
      </mat-card-title>
    </mat-card-header>
    <img
      mat-card-image
      *ngIf="post.imageUrl"
      [src]="post.imageUrl"
      alt="post image"
    />
    <mat-card-content>
      <p>
        {{ post.text }}
      </p>
    </mat-card-content>
    <mat-card-actions>
      <button mat-icon-button color="accent">
        <mat-icon>favorite_border</mat-icon>
      </button>
      <span>{{ post.likes.length }} like it</span>
    </mat-card-actions>
    <div class="comments-container">
      <div class="comments">
        <p *ngFor="let comment of post.comments">
          <span class="username"> {{ comment.username }}: </span>
          <span class="user-comment">{{ comment.text }}</span>
        </p>
      </div>
      <div class="comment-input">
        <form class="comment-form">
          <mat-form-field class="full-width" appearance="fill">
            <mat-label>Write a comment</mat-label>
            <textarea matInput></textarea>
          </mat-form-field>
          <div>
            <button mat-raised-button color="accent" type="submit">
              Comment
            </button>
          </div>
        </form>
      </div>
    </div>
  </mat-card>
</div>
